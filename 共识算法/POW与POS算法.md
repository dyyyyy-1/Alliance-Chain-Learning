# 概述

## POW

wiki上定义为：

>工作量证明（Proof-of-Work，PoW）是一种对应服务与资源滥用、或是拒绝服务攻击的经济对策。
> 一般要求用户进行一些耗时适当的复杂运算，并且答案能被服务方快速验算，以此耗用的时间、设备与能源做为担保成本，以确保服务与资源是被真正的需求所使用。此概念最早由Cynthia Dwork和Moni Naor于1993年的学术论文提出[1]，而工作量证明一词则是在1999年由Markus Jakobsson与Ari Juels.[2]所发表。现时此技术成为了加密货币的主流共识机制之一，如比特币所采用的技术。

 简单来理解就是，POW算法会提供一个证明，来记录你完成的工作量（干的越多，得到的越多）。在POW机制下，节点需要不断求解复杂但验证容易的 SHA256 数学难题,，从而获得打包区块的权利。但完整工作量很难产生, 矿工也可以选择发送部分工作量证明获得相应收益。


### POW工作原理

1.哈希运算
  - POW的核心是对区块头进行哈希运算。每个区块都有一个唯一的区块头，包含上一区块的哈希值、时间戳、难度系数等信息。节点通过不断调整区块头的nonce值，使得整个区块头的哈希值满足一定的条件（例如小于某个值）。这个过程需要大量的计算资源，因此只有拥有足够计算能力的节点才能成功打包区块。

2.竞争与合作
  - 在POW机制下，所有节点都处于竞争状态，通过不断进行哈希运算来争夺打包区块的权利。同时，节点之间也需要进行合作，共同维护区块链的稳定性和安全性。这种竞争与合作的模式，使得POW机制具有很高的安全性和去中心化程度。

3.难度调整
  - 为了维护区块链的稳定性和安全性，POW机制会根据全网算力的情况对难度进行调整。当全网算力增加时，难度会相应提高，反之则会降低。这种动态调整机制使得POW具有很好的适应性。

### POW的特点和优势

1. 去中心化程度高
  - POW机制无需中心化权威的许可，人人都可以参与。每个节点都有机会打包区块，提高了区块链的去中心化程度。

2. 安全性高
  - POW机制的算法简单，容易实现。同时，由于破解POW需要的计算资源和时间都非常巨大，使得POW具有很高的安全性。此外，POW机制的梅克尔树根设置使得哈希函数的解的验证过程也能迅速实现，进一步提高了安全性。

3. 公平性
  - 在POW机制下，每个节点都有公平的机会去计算随机数并打包区块。这种公平性使得POW机制不容易受到攻击和操纵。

4. 可扩展性强
  - 随着区块链技术的发展，POW机制可以通过增加计算难度来控制区块链的大小和生成速度。这种可扩展性使得POW机制能够适应不同的应用场景和需求。

### POW中的博弈困境

在一个公开的矿池中，无论哪个矿工产生区块，获得的收益将按贡献比例分配给每个矿工。 参与者注册为矿工很简单， 只需要提供一个公共的网络接口就可以加入开放矿池， 因此开放矿池很容易受到攻击。 有些注册矿工只发送部分工作量证明，当产生完整工作量证明时就会将其抛弃，这种攻击方式被称为区块截留攻击。 在这种情形下， 攻击者发送了部分工作量证明，但不会对矿池产生有效收益，这也导致攻击者与其他矿工共同分享矿池收益, 从而减少其矿池的收益。

研究表明， 在一个开放的矿池中，矿工可以通过攻击其他矿工增加自己的收益。 如果所有矿工都选择攻击对方，那么他们获得的收益将少于他们互不攻击时获得的收益。这就是 PoW 共识算法中的挖矿困境， 而这种困境也对应到博弈论中经典的囚徒困境，即攻击对个体而言是最优策略， 但却不是系统最优的。

更为重要的是，PoW 共识机制存在着显著的缺陷， 其强大算力造成的资源浪费 (例如算力) 历来为研究者所诟病, 而且长达 10 分钟的交易确认时间使其相对不适合小额交易的商业应用。


## POS

### 概述

区块链鼻祖比特币，是PoW共识，已经稳定运行10年。但在2011年开始，因为比特币有利可图，市场经济下出现了专业矿机专门针对哈希算法、散热、耗能进行优化，这脱离了比特币网络节点运行在成千上万的普通计算机中并公平参与挖矿的初衷。这将造成节点中心化，面临51%攻击风险。因此，以太坊需要预防和改进PoW。POS算法就是代替POW算法的新一代。

权益证明机制PoS（Proof-of-Stake)它以持有币的数量和时间来选择记账权。也就是说，谁的钱包里的币越多，持有的时间越长，谁拥有记账权的概率就越大。(持有越多，获得越多）

### 原理

POS共识机制的原理相对简单。首先，验证者需要抵押一定数量的币作为权益证明。然后，根据验证者的币龄或抵押数量等参数，系统会分配给验证者一定数量的区块。当新的区块被创建时，验证者需要使用私钥签名来证明其所有权。如果一个验证者的私钥被用于签名新的区块，该区块将被添加到区块链中。

### 优点

1. 不需要拼算，不会浪费电力。

2. 作恶成本高昂，想要攻击网络的话，必须要有51%的币龄，这个难度就很大了，不但需要大量的币，还要持有足够长的时间；

3. 缩短了区块的产生时间和确认时间，提高了系统效率。

### 缺点

1. 中心化问题，因为持有的币越多，时间越长，分配的收益越大，获得的币越多，使币过于集中；

2. 流动性变差，持币有收益分配，就没有动力去套现，会屯币不动，开启躺赚模式，导致币的流动性变差。

3. 可能导致“无币挖矿”问题，即验证者可能只是为了获得收益而抵押币，而不是为了维护区块链的安全性。

## DPoS

### 概述

委托权益证明（DPoS）是从经典的权益证明（PoS）系统演变而来的一种共识机制。它由Daniel Larimer于2013年首次构思，并用于他的项目BitShares。在DPoS中，网络用户在委托（也称为验证器）中进行投票，以验证和生成块。在他们成功生成区块后，这些验证器可以将他们的区块奖励分配给投票给他们的人。

### 工作原理

在DPoS系统中，网络用户投票并选举代表，他们也被称为“证人”或“区块生产者”。这些代表的数量是有限制的，而且可以随时更改，因为其他人可以通过投票替换他们。

网络用户可以将代币存入质押池，并投票支持他们希望的特定代表。在进行质押时，网络用户无需将代币发送到特定的钱包；相反，他们可以通过一个质押机制或者服务提供商来操作。

代表在验证交易准确性方面扮演着关键角色；如果他们正确验证了区块，他们将获得交易费作为补偿，这些费用可以分配给投票支持他们的个人。用户质押的代币数量越多，他们可以获得的奖励也就越大。

### 优点

1. 速度和可扩展性： DPoS设计旨在提高交易处理速度并支持网络的可扩展性。

2. 硬件需求低： 相较于某些其他共识机制，DPoS需要的硬件要求较少。

3. 投票权： DPoS允许用户通过投票参与代表的选举，使得过程更具民主性。

### 缺点

1. 可能偏袒恶意代币持有者： DPoS可能会使恶意持有者受益，因为他们可以集中投票权。

2. 需要用户持续参与： DPoS要求用户持续参与投票和治理过程，这可能对某些用户构成障碍。

3. 可能缺乏去中心化： 由于系统可能会偏向那些质押最多代币的用户，因此可能导致去中心化程度不足。
